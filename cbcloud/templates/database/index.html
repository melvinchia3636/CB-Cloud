{% extends 'base/base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css">
<div class="flex items-center justify-between mt-12 text-indigo-400 font-bold text-3xl">
	<div class="flex items-center">
		<span class="iconify w-11 h-11 mr-4" data-icon="uil:database"></span>
		Databases
	</div>
	<div class="flex gap-8">
			<button><span class="iconify w-7 h-7 text-gray-700" data-icon="uil:link-h"></span></button>
			<button><span class="iconify w-7 h-7 text-gray-700" data-icon="uil:unlock-alt"></span></button>
			<button onclick="downloadFile()"><span class="iconify w-7 h-7 text-gray-700" data-icon="uil:cloud-download"></span></button>
			<button onclick="removeFile()"><span class="iconify w-7 h-7 text-gray-700" data-icon="uil:trash-alt"></span></button>
			<button onclick="addTagPromptShow()"><span class="iconify w-7 h-7 text-gray-700" data-icon="uil:tag-alt"></span></button>
			<button><span class="iconify w-7 h-7 text-gray-700" data-icon="tabler:layout-grid"></span></button>
			<button><span class="iconify w-7 h-7 text-gray-700" data-icon="uil:info-circle"></span></button>
		</div>
	</div>
	<div class="my-12 tab relative flex gap-3">
		<div class="w-4/12 bg-white shadow-md rounded-lg overflow-hidden flex flex-col">
			<div class="bg-indigo-400 w-full py-3 px-4 text-white font-bold text-2xl flex items-center">
				<span class="iconify w-8 h-8 mr-3" data-icon="uil:layers-alt"></span>
				Collections
			</div>
			<div class="bg-white w-full py-3 px-4 text-indigo-400 font-bold text-xl flex items-center database-list-item transition-all cursor-pointer" onclick="newCollectionPromptShow()">
				<span class="iconify w-7 h-7 mr-2" data-icon="uil:plus"></span>
				Start collection
			</div>
			<div class="w-full coll overflow-y-scroll relative" style="height: 22rem">

			</div>
		</div>
		<div class="w-5/12 bg-white shadow-lg rounded-lg overflow-hidden flex flex-col">
			<div class="bg-indigo-400 w-full py-3 px-4 flex items-center justify-between">
				<div class="text-white font-bold text-2xl flex items-center w-10/12">
					<span class="iconify w-8 h-8 mr-3" data-icon="uil:notebooks"></span>
					<span class="overflow-ellipsis overflow-hidden doc-title" style="flex-shrink: 9999">Documents</span>
				</div>
				<button><span class="iconify w-6 h-6 text-white" data-icon="uil:ellipsis-v"></span></button>
			</div>
			<div class="bg-white w-full py-3 px-4 text-indigo-400 font-bold text-xl flex items-center database-list-item transition-all cursor-pointer doc-add"  onclick="newDocumentPromptShow()">
				<span class="iconify w-7 h-7 mr-2" data-icon="uil:plus"></span>
				Add document
			</div>
		</div>
		<div class="w-7/12 bg-white shadow-lg rounded-lg overflow-hidden flex flex-col">
			<div class="bg-indigo-400 w-full py-3 px-4 flex items-center justify-between">
				<div class="text-white font-bold text-2xl flex items-center">
					<span class="iconify w-8 h-8 mr-3" data-icon="uil:file-alt"></span>
					Data
				</div>
				<button><span class="iconify w-6 h-6 text-white" data-icon="uil:ellipsis-v"></span></button>
			</div>
			<div class="bg-white w-full py-3 px-4 text-indigo-400 font-bold text-xl flex items-center database-list-item transition-all cursor-pointer">
				<span class="iconify w-7 h-7 mr-2" data-icon="uil:plus"></span>
				Add field
			</div>
		</div>
	</div>
</div>
<div id="collection-create" class="bg-trans transition-all duration-300 w-full h-screen fixed top-0 left-0 flex items-center justify-center invisible">
	<div class="bg-white p-6 rounded-xl shadow-xl">
		<div class="flex items-center text-indigo-400 font-bold text-2xl">
			<span class="iconify w-8 h-8 mr-3" data-icon="uil:layers-alt"></span>
			Start a Collection
		</div>
		<form>
			<input type="text" class="text-gray-700 border-2 rounded-md border-gray-400 px-4 py-3 w-96 my-6 text-xl font-medium" placeholder="Collection ID"/>
			<div class="flex gap-2 justify-end w-full">
				<a class="font-semibold text-lg text-gray-500 px-5 py-2 rounded-md" onclick="newCollectionPromptHide()">
					Cancel
				</a>
				<input type="submit" class="bg-gray-300 font-semibold text-lg text-gray-400 px-6 py-2 rounded-md transition-all" disabled value="Create">
			</div>
		</form>
	</div>
</div>
<div id="document-create" class="bg-trans transition-all duration-300 w-full h-screen overflow-hidden fixed top-0 left-0 flex items-center justify-center invisible">
	<div class="bg-white p-6 rounded-xl shadow-xl" style="max-height: calc(100% - 6rem)">
		<div class="flex items-center text-indigo-400 font-bold text-2xl">
			<span class="iconify w-8 h-8 mr-3" data-icon="uil:notebooks"></span>
			Add a Document
		</div>
		<form>
			<div class="mt-6">
				<div class="border-2 rounded-md border-gray-400 w-96 entry overflow-hidden flex items-center pr-3">
					<input type="text" class="text-gray-700 rounded-md w-full px-4 py-3 text-xl font-medium" placeholder="Document ID"/>
					<a class="text-indigo-400 font-semibold w-16 whitespace-nowrap mt-0.5" onclick="generateAutoID(this)">Auto-ID</a>
				</div>
			</div>
			<div class="w-full ml-4 mb-6 pt-4 fields relative flex flex-col gap-4">
				<div class="field items-center gap-4 relative pl-4 ml-1 last">
					<div class="flex field-name relative">
						<a class="rounded-full ml-1 text-gray-400" onclick="appendField(this)">
							<span class="iconify w-6 h-6 mr-3 bg-white" data-icon="uil:plus-circle"></span>
						</a>
					</div>
				</div>
			</div>
			<div class="flex gap-2 justify-end w-full">
				<a class="font-semibold text-lg text-gray-500 px-5 py-2 rounded-md" onclick="newDocumentPromptHide()">
					Cancel
				</a>
				<input type="submit" class="bg-gray-300 font-semibold text-lg text-gray-400 px-6 py-2 rounded-md transition-all" disabled value="Save">
			</div>
		</form>
	</div>
</div>
<div id="date-picker" class="bg-trans transition-all duration-300 w-full h-screen fixed top-0 left-0 flex items-center justify-center invisible">
	<div class="bg-white p-6 rounded-xl shadow-xl">
		<div class="flex items-center text-indigo-400 font-bold text-2xl">
			<span class="iconify w-8 h-8 mr-3" data-icon="uil:calendar-alt"></span>
			Pick a Date
		</div>
		<div class="flex justify-between my-6 items-center">
			<a class="rounded-full text-gray-400" onclick="gotoMonth(0)">
				<span class="iconify w-6 h-6 bg-white" data-icon="uil:angle-left"></span>
			</a>
			<div class="font-semibold text-xl ym"></div>
			<a class="rounded-full text-gray-400" onclick="gotoMonth(1)">
				<span class="iconify w-6 h-6 bg-white" data-icon="uil:angle-right"></span>
			</a>
		</div>
		<div class="flex justify-center gap-8 mb-6 font-semibold text-gray-400">
			<p class="w-6 flex justify-center items-center">S</p>
			<p class="w-6 flex justify-center items-center">M</p>
			<p class="w-6 flex justify-center items-center">T</p>
			<p class="w-6 flex justify-center items-center">W</p>
			<p class="w-6 flex justify-center items-center">T</p>
			<p class="w-6 flex justify-center items-center">F</p>
			<p class="w-6 flex justify-center items-center">S</p>
		</div>
		<div class="calendar">
		</div>
		<div class="flex gap-2 justify-end w-full">
			<a class="font-semibold text-lg text-gray-500 px-5 py-2 rounded-md" onclick="datePickerHide()">
				Cancel
			</a>
			<input type="submit" class="bg-indigo-400 text-white font-semibold text-lg px-6 py-2 rounded-md transition-all" value="Pick" onclick="pickDate()">
		</div>
	</div>
</div>
<template id="value-field">
	<div class="field pl-4 ml-1">
		<div class="flex items-start gap-4 bg-white relative">
			<div class="flex gap-4 items-center field-name">
				<div class="relative"><input type="text" class="text-gray-700 relative border-2 rounded-md border-gray-400 px-4 py-3 w-48 text-xl font-medium" placeholder="Field"/></div>
				<p class="text-xl font-semibold"> = </p>
			</div>
			<div class="flex items-start gap-2">
				<select class="text-gray-700 px-4 py-3 w-48 text-xl font-medium">
					<option value="0" default>string</option>
					<option value="1">number</option>
					<option value="2">boolean</option>
					<option value="3">map</option>
					<option value="4">array</option>
					<option value="5">null</option>
					<option value="6">timestamp</option>
					<option value="7">geopoint</option>
				</select>
				<div>
					<div class="flex items-center gap-4">
						<input type="text" class="text-gray-700 border-2 rounded-md border-gray-400 px-4 py-3 w-48 text-xl font-medium val" placeholder="Value"/>
						<select class="text-gray-700 px-4 py-3 w-48 text-xl font-medium bool hidden">
							<option value="0" default>false</option>
							<option value="1">true</option>
						</select>
						<div class="flex items-center gap-4 bg-white relative" onclick="removeField(this)">
							<a class="rounded-full ml-1 text-gray-400">
								<span class="iconify w-6 h-6 mr-3" data-icon="uil:minus-circle"></span>
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="w-full ml-4 fields sub-fields relative flex flex-col gap-4 pt-4 hidden geo">
			<div class="flex field sub-field items-start gap-4 relative pl-1 ml-4">
				<div class="flex items-start gap-2 field-name relative">
					<input type="text" class="text-gray-700 relative border-2 rounded-md border-gray-400 px-4 py-3 w-48 text-xl font-medium sub-val lat" placeholder="Latitude"/>
				</div>
			</div>
			<div class="flex field sub-field items-start gap-4 relative pl-1 ml-4">
				<div class="flex items-start gap-2 field-name relative">
					<input type="text" class="text-gray-700 relative border-2 rounded-md border-gray-400 px-4 py-3 w-48 text-xl font-medium sub-val lon" placeholder="Longitude"/>
				</div>
			</div>
		</div>
		<div class="w-full ml-4 fields sub-fields relative flex flex-col gap-4 pt-4 hidden timestamp">
			<div class="flex field sub-field gap-4 relative pl-1 ml-4">
				<div class="flex items-center gap-2 field-name relative">
					<div class="flex items-center bg-white border-2 rounded-md border-gray-400 px-4 py-3 relative">
						<input type="text" class="text-gray-700 relative text-xl font-medium sub-val date" placeholder="MM/DD/YYYY"/>
						<a class="rounded-full ml-1 text-gray-400" onclick="datePickerShow(this)">
							<span class="iconify w-6 h-6" data-icon="uil:calendar-alt"></span>
						</a>
					</div>
				</div>
			</div>
			<div class="flex field sub-field items-start gap-4 relative pl-1 ml-4">
				<div class="flex items-start gap-2 field-name relative">
					<input type="text" class="text-gray-700 relative border-2 rounded-md border-gray-400 px-4 py-3 w-48 text-xl font-medium sub-val time" placeholder="00:00:00000"/>
				</div>
			</div>
		</div>
	</div>
</template>
<template id="map-fields">
	<div class="w-full ml-4 mb-6 pt-4 fields map relative flex flex-col gap-4">
		<div class="field items-center gap-4 relative pl-4 ml-1 last">
			<div class="flex field-name relative">
				<a class="rounded-full ml-1 text-gray-400" onclick="appendField(this)">
					<span class="iconify w-6 h-6 mr-3 bg-white" data-icon="uil:plus-circle"></span>
				</a>
			</div>
		</div>
	</div>
</template>
<template id="array-fields">
	<div class="w-full ml-4 mb-6 pt-4 fields array relative flex flex-col gap-4">
		<div class="field items-center gap-4 relative pl-4 ml-1 last">
			<div class="flex field-name relative">
				<a class="rounded-full ml-1 text-gray-400" onclick="appendArrayField(this)">
					<span class="iconify w-6 h-6 mr-3 bg-white" data-icon="uil:plus-circle"></span>
				</a>
			</div>
		</div>
	</div>
</template>
<script src="https://unpkg.com/smooth-scrollbar@8.6.3/dist/smooth-scrollbar.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
<script>
	var HTMLParser = new DOMParser()
	var csrfToken = HTMLParser.parseFromString(`{% csrf_token %}`, "text/html").querySelector("input").value
</script>
<script src="{% static 'database/database.js' %}"></script>
{% endblock %}